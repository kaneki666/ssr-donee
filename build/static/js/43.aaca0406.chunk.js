(this.webpackJsonpdonee=this.webpackJsonpdonee||[]).push([[43],{2343:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var a=n(10),r=n.n(a),c=n(18),s=n(8),i=n(79),u=n(33),o=n(1),l=n(269),j=n.n(l),d=n(7),b=n(66),f=n(191),O=n(188),h=n(234),p=n(233),x=n(349),v=n(350),g=n(192),m=n(151),w=n(47),S=n(190),k=n(345),y=n(69),C=n(116),_=n(57),I=n(34),R=n(67),L=n(127),A=n(92),P=n(0),D=[{id:"name",label:"Name",alignRight:!1},{id:"role",label:"Role",alignRight:!1},{id:"status",label:"Status",alignRight:!1}],E=Object(d.a)(b.a)((function(){return{fontSize:32,fontWeight:"bold",height:40,color:"#212529"}}));function B(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function M(){var e=Object(R.a)(),t=Object(o.useState)([]),n=Object(s.a)(t,2),a=n[0],i=n[1],u=Object(o.useState)([]),l=Object(s.a)(u,2),j=l[0],d=l[1],b=Object(o.useState)(!1),f=Object(s.a)(b,2),O=f[0],h=f[1],p=Object(I.useQuery)(["roleUserListDashboard",O],Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("/ngo-user-list/");case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))),x=p.data,v=p.isLoading,g=p.isError,m=p.error,w=Object(I.useQuery)(["roleListDashboard"],Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("/role-list/");case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))));Object(o.useEffect)((function(){if(void 0!==x&&null!==x){var e=x.map((function(e){return null!==e.user.full_name?{id:e.id,name:e.user.full_name,avatarUrl:e.user.image,role:e.role,status:e.is_active}:{id:e.id,name:"",avatarUrl:e.user.image,role:e.role,status:e.is_active}}));i(e)}}),[x,O]),Object(o.useEffect)((function(){if(void 0!==w.data&&null!==w.data){var e=w.data.map((function(e){if(null!==e.id)return{value:e.id,label:e.role_type}}));d(e)}}),[w.data]);return Object(P.jsx)("div",{children:v||w.isLoading?Object(P.jsx)(L.a,{}):Object(P.jsx)("div",{children:g||w.isError?Object(P.jsx)(A.a,{error:g?m:w.error}):a&&Object(P.jsx)(N,{data:x,roleList:j,handleRefetch:function(){return h(!O)}})})})}var N=function(e){var t=e.data,n=e.roleList,a=e.handleRefetch,l=Object(R.a)(),d=[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],L=Object(o.useState)(0),A=Object(s.a)(L,2),M=A[0],N=A[1],Q=Object(o.useState)("asc"),T=Object(s.a)(Q,2),U=T[0],W=T[1],F=Object(o.useState)([]),J=Object(s.a)(F,2),q=J[0],z=J[1],G=Object(o.useState)("name"),H=Object(s.a)(G,2),K=H[0],V=H[1],X=Object(o.useState)(""),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],ee=Object(o.useState)(5),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],re=Object(o.useState)(0),ce=Object(s.a)(re,2),se=ce[0],ie=ce[1],ue=Object(o.useState)(!1),oe=Object(s.a)(ue,2),le=oe[0],je=oe[1],de=M>0?Math.max(0,(1+M)*ne-t.length):0,be=function(e,t,n){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n?Object(i.filter)(e,(function(e){if(null!==e.user.full_name)return-1!==e.user.full_name.toLowerCase().indexOf(n.toLowerCase())})):a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,n){return B(e,n,t)}:function(e,n){return-B(e,n,t)}}(U,K),Z),fe=0===be.length,Oe=Object(I.useMutation)(function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.put("ngo-user-role-update/".concat(t.id,"/"),{role:t.roleID});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),he=Object(I.useMutation)(function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.put("ngo-user-status-update/".concat(t.id,"/"),{is_active:t.is_active});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(P.jsxs)(f.a,{children:[Object(P.jsx)(_.c,{open:le,handleClose:function(){return je(!1)}}),Object(P.jsxs)(O.a,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:0,children:[Object(P.jsx)(E,{children:"Roles"}),Object(P.jsx)(h.a,{sx:{backgroundColor:"#4F89A0",borderRadius:40},variant:"contained",onClick:function(){return je(!0)},startIcon:Object(P.jsx)(u.a,{icon:j.a}),children:"Add new member"})]}),Object(P.jsxs)(p.a,{sx:{marginTop:3},children:[Object(P.jsx)(_.C,{numSelected:q.length,filterName:Z,onFilterName:function(e){$(e.target.value)}}),Object(P.jsx)(y.a,{children:Object(P.jsx)(x.a,{sx:{minWidth:800},children:Object(P.jsxs)(v.a,{children:[Object(P.jsx)(_.B,{order:U,orderBy:K,headLabel:D,rowCount:t.length,numSelected:q.length,onRequestSort:function(e,t){W(K===t&&"asc"===U?"desc":"asc"),V(t)},onSelectAllClick:function(e){if(e.target.checked){var n=t.map((function(e){return e.user.full_name}));z(n)}else z([])}}),Object(P.jsxs)(g.a,{children:[be.slice(M*ne,M*ne+ne).map((function(e){var t=e.id,s=e.user,i=e.role,u=e.is_active,o=-1!==q.indexOf(s.full_name),l=function(){var e=Object(c.a)(r.a.mark((function e(c){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie(c),s={id:t,roleID:n[c].value},Oe.mutateAsync(s),setTimeout((function(){a()}),200);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie(n),c={id:t,is_active:d[n].value},he.mutateAsync(c),setTimeout((function(){a()}),200);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsxs)(m.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:o,"aria-checked":o,children:[Object(P.jsx)(w.a,{component:"th",scope:"row",padding:"normal",children:Object(P.jsxs)(O.a,{direction:"row",alignItems:"center",spacing:2,children:[Object(P.jsx)(S.a,{alt:s.full_name,src:s.image}),Object(P.jsx)(b.a,{variant:"subtitle2",noWrap:!0,children:s.full_name})]})}),Object(P.jsx)(w.a,{align:"left",children:Object(P.jsxs)(O.a,{direction:"row",alignItems:"center",spacing:2,justifyContent:"space-between",children:[i,Object(P.jsx)(_.k,{options:n,handleStatusChange:l,selectedIndex:se})]})}),Object(P.jsx)(w.a,{align:"left",children:Object(P.jsxs)(O.a,{direction:"row",alignItems:"center",spacing:2,justifyContent:"space-between",children:[Object(P.jsx)(b.a,{sx:{color:u?"#16B698":"tomato"},children:u?"Active Donee":"Inactive Donee"}),Object(P.jsx)(_.k,{options:d,handleStatusChange:j,selectedIndex:se})]})})]},t)})),de>0&&Object(P.jsx)(m.a,{style:{height:53*de},children:Object(P.jsx)(w.a,{colSpan:6})})]}),fe&&Object(P.jsx)(g.a,{children:Object(P.jsx)(m.a,{children:Object(P.jsx)(w.a,{align:"center",colSpan:6,sx:{py:3},children:Object(P.jsx)(C.a,{searchQuery:Z})})})})]})})}),Object(P.jsx)(k.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:ne,page:M,onPageChange:function(e,t){N(t)},onRowsPerPageChange:function(e){ae(parseInt(e.target.value,10)),N(0)}})]})]})}}}]);
//# sourceMappingURL=43.aaca0406.chunk.js.map